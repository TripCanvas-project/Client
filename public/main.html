<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TripCanvas - AI 기반 여행 플래너</title>
    <script
      type="text/javascript"
      src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b1c2a432c49b42d7baf0774cc6cb8380&autoload=false&libraries=services&callback=mapScriptLoaded"
    ></script>
    <link rel="stylesheet" href="./styles/main.css" />
  </head>
  <body>
    <!-- 헤더 -->
    <header class="header">
      <div class="header-left">
        <div class="logo">🗺️ TripCanvas</div>
        <div class="trip-title">서울-부산 2박 3일 여행</div>
      </div>
      <div class="header-right">
        <div class="collab-users">
          <div class="user-avatar" title="나">🧑</div>
          <div class="user-avatar" title="김민수">김</div>
          <div class="user-avatar" title="이지은">이</div>
        </div>
        <button class="btn btn-primary">💾 저장하기</button>
        <button class="btn btn-secondary" id="logout-button">
          🚪 로그아웃
        </button>
      </div>
    </header>

    <!-- 메인 컨테이너 -->
    <div class="main-container">
      <!-- 왼쪽 사이드바 -->
      <aside class="sidebar">
        <div class="sidebar-tabs">
          <button class="tab active" data-tab="route">📍 경로</button>
          <button class="tab" data-tab="template">🎨 템플릿</button>
          <button class="tab" data-tab="schedule">📊 일정</button>
        </div>

        <div class="sidebar-content">
          <!-- 경로 탭 -->
          <div class="tab-content active" id="route-content">
            <div class="section-title">🤖 AI 경로 생성</div>

            <div class="input-group">
              <label>출발지</label>
              <input
                type="text"
                id="departure"
                placeholder="예: 서울역"
                value="서울역"
              />
            </div>

            <div class="input-group input-group-destination">
              <label>도착지</label>
              <select name="destination" id="destination">
                <option value="">지역을 선택하세요</option>
                <option value="서울특별시">서울특별시</option>
                <option value="인천광역시">인천광역시</option>
                <option value="대전광역시">대전광역시</option>
                <option value="대구광역시">대구광역시</option>
                <option value="광주광역시">광주광역시</option>
                <option value="부산광역시">부산광역시</option>
                <option value="울산광역시">울산광역시</option>
                <option value="세종특별자치시">세종특별자치시</option>
                <option value="경기도">경기도</option>
                <option value="강원특별자치도">강원특별자치도</option>
                <option value="충청북도">충청북도</option>
                <option value="충청남도">충청남도</option>
                <option value="경상북도">경상북도</option>
                <option value="경상남도">경상남도</option>
                <option value="전북특별자치도">전북특별자치도</option>
                <option value="전라남도">전라남도</option>
                <option value="제주특별자치도">제주특별자치도</option>
              </select>
              <select name="sub-destination" id="sub-destination">
                <option value="">세부지역을 선택하세요</option>
              </select>
            </div>

            <div class="date-row">
              <div class="input-group">
                <label>시작날짜</label>
                <input type="date" id="start-date" />
              </div>

              <div class="input-group">
                <label>마지막날짜</label>
                <input type="date" id="end-date" />
              </div>
            </div>

            <div class="input-group">
              <label>개인 예산 (원)</label>
              <input
                type="number"
                id="personal-budget"
                placeholder="예: 500000"
                min="0"
                step="10000"
              />
            </div>

            <div class="input-group">
              <label>여행 인원 (명)</label>
              <input
                type="number"
                id="people-count"
                placeholder="예: 2"
                min="1"
                value="1"
              />
            </div>

            <div class="input-group">
              <label>총 예산</label>
              <div
                style="
                  padding: 12px;
                  background: var(--primary);
                  border-radius: 8px;
                  color: white;
                  font-size: 20px;
                  font-weight: bold;
                  text-align: center;
                "
                id="total-budget"
              >
                0원
              </div>
            </div>

            <div class="input-group">
              <label>여행 스타일</label>
              <div class="template-chips" id="travel-style-chips">
                <div class="chip selected" data-value="맛집">🍜 맛집</div>
                <div class="chip" data-value="역사/문화">🏛️ 역사/문화</div>
                <div class="chip" data-value="자연">🏖️ 휴양</div>
                <div class="chip" data-value="카페">☕ 카페</div>
                <div class="chip" data-value="쇼핑">🛍️ 쇼핑</div>
                <div class="chip" data-value="캠핑">⛺ 캠핑</div>
              </div>
              <input
                type="hidden"
                id="selected-styles"
                name="place-themes"
                value="맛집"
              />
            </div>

            <button class="btn-generate" id="btn-generate">
              ✨ AI로 경로 생성하기
            </button>

            <!-- 생성된 장소 리스트 -->
            <div style="margin-top: 24px">
              <div class="section-title">📍 추천 장소</div>

              <!-- ✅ Day 탭 -->
              <div class="day-tabs" id="ai-day-tabs"></div>

              <!-- ✅ Day별 장소 리스트 -->
              <div id="ai-day-places"></div>
            </div>
          </div>

          <!-- 템플릿 탭 -->
          <div class="tab-content" id="template-content">
            <div class="section-title">🎨 여행 템플릿</div>
            <p
              style="
                color: var(--text-light);
                margin-bottom: 20px;
                font-size: 14px;
              "
            >
              검증된 여행 템플릿을 선택하면 AI가 자동으로 경로를 생성합니다.
            </p>

            <div class="template-grid">
              <div class="template-card">
                <div class="template-icon">🍜</div>
                <div class="template-name">부산 미식 투어</div>
                <div class="template-desc">
                  자갈치 시장, 해운대 맛집 등 부산의 대표 음식을 맛보는 2박 3일
                  코스
                </div>
              </div>

              <div class="template-card">
                <div class="template-icon">🏛️</div>
                <div class="template-name">경주 역사 기행</div>
                <div class="template-desc">
                  불국사, 석굴암, 첨성대 등 신라 천년의 역사를 느끼는 1박 2일
                </div>
              </div>

              <div class="template-card">
                <div class="template-icon">🏖️</div>
                <div class="template-name">제주 힐링 여행</div>
                <div class="template-desc">
                  아름다운 해변과 카페를 즐기는 여유로운 3박 4일 일정
                </div>
              </div>

              <div class="template-card">
                <div class="template-icon">⛰️</div>
                <div class="template-name">강원도 겨울 여행</div>
                <div class="template-desc">
                  스키장과 눈꽃 축제를 즐기는 2박 3일 겨울 여행
                </div>
              </div>
            </div>
          </div>

          <!-- 일정 탭 -->
          <div class="tab-content" id="schedule-content">
            <div class="section-title">📊 일정 관리</div>

            <button class="btn-add-schedule" id="add-schedule-btn">
              ➕ 일정 추가하기
            </button>

            <div style="margin-top: 20px">
              <div class="section-title">📅 내 일정 목록</div>
              <div class="schedule-list" id="schedule-list">
                <div class="schedule-item">
                  <div class="schedule-info">
                    <div class="schedule-time">⏰ 10:00 AM</div>
                    <div class="schedule-title">광안리 해변 산책</div>
                    <div class="schedule-location">📍 부산 광안리</div>
                  </div>
                  <div class="schedule-actions">
                    <button class="btn-icon" title="수정">✏️</button>
                    <button class="btn-icon" title="삭제">🗑️</button>
                  </div>
                </div>

                <div class="schedule-item">
                  <div class="schedule-info">
                    <div class="schedule-time">⏰ 12:30 PM</div>
                    <div class="schedule-title">자갈치 시장 점심</div>
                    <div class="schedule-location">📍 자갈치 시장</div>
                  </div>
                  <div class="schedule-actions">
                    <button class="btn-icon" title="수정">✏️</button>
                    <button class="btn-icon" title="삭제">🗑️</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 일정 추가 폼 (숨김 상태) -->
            <div
              id="schedule-form"
              style="
                display: none;
                margin-top: 20px;
                background: var(--bg);
                padding: 16px;
                border-radius: 12px;
              "
            >
              <div class="section-title">✏️ 새 일정 추가</div>

              <div class="input-group">
                <label>시간</label>
                <input type="time" id="schedule-time" />
              </div>

              <div class="input-group">
                <label>일정 제목</label>
                <input
                  type="text"
                  id="schedule-title"
                  placeholder="예: 광안리 해변 산책"
                />
              </div>

              <div class="input-group">
                <label>위치</label>
                <input
                  type="text"
                  id="schedule-location"
                  placeholder="예: 부산 광안리"
                />
              </div>

              <div style="display: flex; gap: 8px">
                <button
                  class="btn-generate"
                  id="save-schedule-btn"
                  style="margin-top: 0"
                >
                  💾 저장
                </button>
                <button
                  class="btn-secondary"
                  id="cancel-schedule-btn"
                  style="width: 100%; padding: 14px; margin-top: 0"
                >
                  취소
                </button>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- 중앙 지도 영역 -->
      <main class="map-container">
        <div class="map-toolbar">
          <button class="tool-btn active" title="이동">🖐️</button>
          <button class="tool-btn" title="메모 작성">✏️</button>
          <button class="tool-btn" title="하이라이트">🖍️</button>
          <button class="tool-btn" title="텍스트">📝</button>
          <button class="tool-btn" title="지우개">🧹</button>
          <button class="tool-btn" title="실행 취소">↩️</button>
        </div>

        <div class="map-canvas">
          <div id="kakao-map" style="width: 100%; height: 100%"></div>
          <div class="map-placeholder">
            <div class="map-placeholder-icon">🗺️</div>
            <div>AI로 경로를 생성하면 여기에 지도가 표시됩니다</div>
            <div style="margin-top: 8px; font-size: 14px">
              지도 위에 메모를 작성하고 동행자들과 실시간으로 공유하세요!
            </div>
          </div>
        </div>
      </main>

      <!-- 오른쪽 패널 -->
      <aside class="right-panel">
        <div class="panel-tabs">
          <button class="tab active" data-panel="chat">💬 채팅</button>
          <button class="tab" data-panel="video">📹 화상</button>
          <button class="tab" data-panel="budget">💰 예산</button>
        </div>

        <div class="panel-content">
          <!-- 채팅 탭 -->
          <div class="panel-tab-content active" id="chat-content">
            <div class="section-title">💬 실시간 협업 채팅</div>

            <div class="chat-messages" id="chat-messages">
              <div class="message">
                <div class="message-author">김민수</div>
                <div class="message-text">
                  자갈치 시장 대신 송정 해변 어때요?
                </div>
                <div class="message-time">3분 전</div>
              </div>

              <div class="message">
                <div class="message-author">이지은</div>
                <div class="message-text">
                  좋아요! 서핑도 할 수 있을 것 같아요 🏄
                </div>
                <div class="message-time">1분 전</div>
              </div>

              <div class="message">
                <div class="message-author">나</div>
                <div class="message-text">그럼 일정 수정해볼게요!</div>
                <div class="message-time">방금</div>
              </div>
            </div>
          </div>

          <!-- 화상 탭 -->
          <div class="panel-tab-content" id="video-content">
            <div class="section-title">📹 화상 채팅</div>

            <div class="video-chat">
              <div class="video-grid">
                <div class="video-tile">
                  🧑
                  <div class="video-name">나</div>
                </div>
                <div class="video-tile">
                  👤
                  <div class="video-name">김민수</div>
                </div>
                <div class="video-tile">
                  👤
                  <div class="video-name">이지은</div>
                </div>
              </div>
              <div class="video-controls">
                <button class="video-control-btn">🎤</button>
                <button class="video-control-btn">📹</button>
                <button class="video-control-btn">🖥️</button>
                <button class="video-control-btn danger">📞</button>
              </div>
            </div>
          </div>

          <!-- 예산 탭 -->
          <div class="panel-tab-content" id="budget-content">
            <div class="budget-summary">
              <div class="budget-amount">₩523,000</div>
              <div class="budget-label">총 사용 금액 / ₩800,000</div>
            </div>

            <div class="section-title">최근 지출 내역</div>

            <div class="expense-item">
              <div class="expense-info">
                <div class="expense-name">KTX 왕복 티켓</div>
                <div class="expense-category">#교통비</div>
              </div>
              <div class="expense-amount">₩120,000</div>
            </div>

            <div class="expense-item">
              <div class="expense-info">
                <div class="expense-name">호텔 2박</div>
                <div class="expense-category">#숙박비</div>
              </div>
              <div class="expense-amount">₩280,000</div>
            </div>

            <div class="expense-item">
              <div class="expense-info">
                <div class="expense-name">자갈치 시장 회</div>
                <div class="expense-category">#식비</div>
              </div>
              <div class="expense-amount">₩89,000</div>
            </div>
          </div>
        </div>

        <div class="chat-input">
          <input
            type="text"
            id="chat-input"
            placeholder="메시지를 입력하세요..."
          />
          <button id="chat-send-btn">전송</button>
        </div>
      </aside>
    </div>

    <!-- 🔄 로딩 오버레이 -->
    <div id="loading-overlay" class="loading-overlay hidden">
      <div class="loading-box">
        <div class="spinner"></div>
        <p>AI가 최적의 여행 경로를 생성 중입니다…</p>
      </div>
    </div>

    <script type="module" src="./pages/Main.mjs"></script>
  </body>
</html>
